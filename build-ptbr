rm src/autogenerated/compressed-code*.zx0
touch src/autogenerated/compressed-code1.zx0
touch src/autogenerated/compressed-code2.zx0
touch src/autogenerated/compressed-code3.zx0

# First, compile the game for a first time (to get the symbol table):
java -jar java/mdl.jar -equ LANGUAGE=2 src/main.asm -bin westen-ptbr.rom -st isometric.sym

# Second, compile the code to be compressed:
java -jar java/mdl.jar -equ LANGUAGE=2 src/compressed-code1.asm -bin src/autogenerated/compressed-code1.bin -st compressed-code1.sym
./java/zx0 -f src/autogenerated/compressed-code1.bin src/autogenerated/compressed-code1.zx0

java -jar java/mdl.jar -equ LANGUAGE=2 src/compressed-code2.asm -bin src/autogenerated/compressed-code2.bin -st compressed-code2.sym
./java/zx0 -f src/autogenerated/compressed-code2.bin src/autogenerated/compressed-code2.zx0

java -jar java/mdl.jar -equ LANGUAGE=2 src/compressed-code3.asm -bin src/autogenerated/compressed-code3.bin -st compressed-code3.sym
./java/zx0 -f src/autogenerated/compressed-code3.bin src/autogenerated/compressed-code3.zx0

# Finally, compile the game again:
java -jar java/mdl.jar -equ LANGUAGE=2 src/main.asm -bin westen-ptbr.rom -st isometric.sym
